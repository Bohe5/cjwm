<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sky.mapper.DishFlavorMapper">
    <!--
         insert标签：定义批量插入菜品口味的SQL
         id属性：与DishFlavorMapper接口中的insertBatch方法名完全一致
         说明：无需显式指定parameterType，MyBatis会自动识别传入的参数（此处为包含flavors集合的对象）
       -->
    <insert id="insertBatch" >
        insert into dish_flavor(dish_id,name,value) VALUES
        <!--
            foreach标签：循环遍历集合，生成批量插入的VALUES子句
            collection="flavors"：指定要遍历的集合参数名（需与接口方法传入的集合属性名一致）
            item="df"：定义遍历集合时的单个元素别名（此处df代表单个DishFlavor对象）
            separator=","：指定多个元素之间的分隔符（批量插入时用逗号分隔多个括号内的参数组）
            -->
        <foreach collection="flavors" item="df" separator=",">
            (#{df.dishId},#{df.name},#{df.value})
        </foreach>
    </insert>
    <!--
      delete标签：定义根据菜品ID批量删除口味的SQL
      id属性：与DishFlavorMapper接口中的deleteByDishIds方法名一致
    -->
    <delete id="deleteByDishIds">
        delete from dish_flavor where dish_id in
        <foreach collection="dishIds" open="(" close=")" separator="," item="dishId">
            #{dishId}
        </foreach>
    </delete>
</mapper>
